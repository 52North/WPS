<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:ctx="http://www.springframework.org/schema/context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-4.1.xsd">

	<ctx:annotation-config />

	<import resource="spring/spring-db-config.xml" />
	<import resource="spring/spring-security-config.xml" />

	<!-- Binding implementations from iceland -->
	<bean id="kvpBinding" class="org.n52.iceland.binding.kvp.KvpBinding" />

	<bean id="serviceProviderFactory" class="org.n52.iceland.ogc.ows.ServiceProviderFactory" />
	<bean id="serviceIdentificationFactory" class="org.n52.iceland.ogc.ows.ServiceIdentificationFactory" />

	<bean id="icelandServlet" class="org.n52.iceland.service.Service" />

	<bean class="org.n52.iceland.service.ServiceConfiguration" />

	<bean id="generatorFactory" class="org.n52.wps.io.GeneratorFactory" />
	<bean id="parserFactory" class="org.n52.wps.io.ParserFactory" />

	<bean class="org.n52.wps.server.AbstractDescriptorAlgorithm" />
	<bean class="org.n52.wps.server.AbstractSelfDescribingAlgorithm" />
<!-- 	TODO: Put in respective module -->
<!-- 	<bean class="org.n52.wps.io.datahandler.generator.ProxyGMLGenerator4Files" /> -->
<!-- 	<bean class="org.n52.wps.server.sextante.SextanteProcessDescriptionCreator" /> -->
	<bean class="org.n52.wps.client.StaticDataHandlerRepository" />
	<bean class="org.n52.wps.server.response.ResponseData" />
	<bean class="org.n52.wps.server.request.InputHandler" />
	<bean class="org.n52.wps.io.datahandler.generator.AbstractGenerator" />

	<bean id="wpsConfig" class="org.n52.wps.commons.WPSConfig" />

	<bean id="repositoryManager" class="org.n52.wps.server.RepositoryManager" />

	<bean id="configurationManager" class="org.n52.wps.webapp.api.ConfigurationManagerImpl" />
	<bean id="valueParser" class="org.n52.wps.webapp.api.ValueParser" />
	<bean id="backupService" class="org.n52.wps.webapp.service.BackupServiceImpl" />
	<bean id="capabilitiesService" class="org.n52.wps.webapp.service.CapabilitiesServiceImpl" />
	<bean id="configurationService" class="org.n52.wps.webapp.service.ConfigurationServiceImpl" />
	<bean id="logConfigurationService" class="org.n52.wps.webapp.service.LogConfigurationsServiceImpl" />
	<bean id="userService" class="org.n52.wps.webapp.service.UserServiceImpl" />

	<bean id="configurationDAO" class="org.n52.wps.webapp.dao.JdbcConfigurationDAO" />
	<bean id="userDAO" class="org.n52.wps.webapp.dao.JdbcUserDAO" />
	<bean id="capabilitiesDAO" class="org.n52.wps.webapp.dao.XmlCapabilitiesDAO" />
	<bean id="logConfigurationsDAO" class="org.n52.wps.webapp.dao.XmlLogConfigurationsDAO" />

	<bean id="jDomUtil" class="org.n52.wps.webapp.util.JDomUtil" />
	<bean id="resourcePathUtil" class="org.n52.wps.webapp.util.ResourcePathUtil" />

	<bean id="server" class="org.n52.wps.webapp.entities.Server" />
	<bean id="user" class="org.n52.wps.webapp.entities.User" />
	<bean id="serviceIdentification" class="org.n52.wps.webapp.entities.ServiceIdentification" />
	<bean id="logConfigurations" class="org.n52.wps.webapp.entities.LogConfigurations" />
	<bean id="serviceProvider" class="org.n52.wps.webapp.entities.ServiceProvider" />

	<bean id="bindingRepository" class="org.n52.iceland.binding.BindingRepository" />
	<bean id="codingRepository" class="org.n52.iceland.coding.CodingRepository" />
	<bean id="supportedTypeRepository" class="org.n52.iceland.coding.SupportedTypeRepository" />
	<bean id="owsExtendedCapabilitiesRepository"
		class="org.n52.iceland.ogc.ows.OwsExtendedCapabilitiesProviderRepository" />
	<bean id="offeringExtensionRepository" class="org.n52.iceland.ogc.swes.OfferingExtensionRepository" />
	<bean id="capabilitiesExtensionRepository" class="org.n52.iceland.ogc.sos.CapabilitiesExtensionRepository" />
	<bean id="i18nDaoRepository" class="org.n52.iceland.i18n.I18NDAORepository" />
	<bean id="schemaRepository" class="org.n52.iceland.coding.encode.SchemaRepository" />
	<bean id="operationHandlerRepository" class="org.n52.iceland.ds.OperationHandlerRepository" />
	<bean id="requestResponseModifierRepository"
		class="org.n52.iceland.convert.RequestResponseModifierRepository" />
	<bean id="responseWriterRepository" class="org.n52.iceland.coding.encode.ResponseWriterRepository" />
	<bean id="serviceOperatorRepository"
		class="org.n52.iceland.service.operator.ServiceOperatorRepository" />
	<bean id="requestOperatorRepository"
		class="org.n52.iceland.request.operator.RequestOperatorRepository" />
	<bean id="converterRepository" class="org.n52.iceland.convert.ConverterRepository" />
	<bean id="decoderRepository" class="org.n52.iceland.coding.decode.DecoderRepository" />
	<bean id="encoderRepository" class="org.n52.iceland.coding.encode.EncoderRepository" />

	<bean id="xmlOptionsHelper" class="org.n52.simplewps.encode.XmlOptionsHelper" />

	<bean id="xmlResponseWriterFactory" class="org.n52.simplewps.encode.XmlResponseWriterFactory" />
	<bean id="abstractServiceResponseWriterFactory"
		class="org.n52.simplewps.encode.AbstractServiceResponseWriterFactory" />

	<!-- Decoder implementations from bindings/rest/code -->
	<bean class="org.n52.simplewps.decode.kvp.DescribeProcessKvpDecoder" />

	<!-- Encoder implementations from extensions/gda/operation -->
	<bean class="org.n52.simplewps.encode.DescribeProcessEncoder" />

	<bean id="eventBus" class="org.n52.iceland.event.ServiceEventBus">
		<property name="async" value="false" />
	</bean>

	<bean class="org.n52.iceland.config.spring.LifecycleBeanPostProcessor">
		<description>This calls Constructable#init and Destroyable#destroy for
			all beans.</description>
	</bean>

	<bean class="org.n52.simplewps.handler.DescribeProcessHandler" />

	<bean
		class="org.n52.simplewps.request.operator.DescribeProcessRequestOperator" />

	<bean class="org.n52.wps.server.LocalAlgorithmRepository" />

	<!-- ServiceOperator implementations from operations/core-v20 -->
	<bean class="org.n52.iceland.service.operator.GenericServiceOperator">
		<property name="service" value="WPS" />
		<property name="version" value="1.0.0" />
	</bean>

	<beans profile="production">
		<ctx:component-scan base-package="org.n52">
			<ctx:include-filter type="assignable"
				expression="org.n52.wps.webapp.api.ConfigurationModule" />
			<ctx:exclude-filter type="regex"
				expression="org\.n52\.wps\.webapp\.testmodules\..*" />
		</ctx:component-scan>
	</beans>

	<beans profile="controller-test">
		<!-- Include test modules in the context for integration testing -->
		<ctx:component-scan base-package="org.n52">
			<ctx:include-filter type="assignable"
				expression="org.n52.wps.webapp.api.ConfigurationModule" />
		</ctx:component-scan>
	</beans>

	<beans profile="test">
		<!-- Include test modules in the context for integration testing -->
		<ctx:component-scan base-package="org.n52">
			<ctx:include-filter type="assignable"
				expression="org.n52.wps.webapp.api.ConfigurationModule" />
			<ctx:exclude-filter type="regex"
				expression="org\.n52\.wps\.webapp\.testmodules\..*" />
		</ctx:component-scan>
	</beans>

</beans>